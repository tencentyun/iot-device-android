# 优图人脸活体-3D文档 FACE-LIVE-3D

> 输入 3D 图进行活体检测

version: v2.0.0

## CHANGELIST

### v2.0.0

- [不兼容更新]：优化和统一优图所有通用接口
- [不兼容更新]：detect 方法去掉多余的参数，提高单次调用的性能

## Java

package: com.tencent.youtu.YTFaceLive3D

### 通用接口

- static String getVersion();
    - @brief 获得 SDK + MODEL 的版本号，如`v3.0.0-v7114`
        - MODEL 的版本号由 `config.ini` 中读取获得
        - SDK 的版本号一般为 `v3.0.0`/`v3.0.0-beta.0`/`v3.1.1-rc.0`
    - @return 版本号

- static int globalInit(String dirPath, String configFilename);
    - @brief 全局初始化函数，初始化模型，进程初始化一次即可，多线程不安全
    - @param `dirPath` 模型所在外部存储空间的绝对路径
    - @param `configFilename` 模型所在外部存储控件路径下 config 的文件名，如 `config.ini`
    - @return `< 0` 失败

- static int globalInit(AssetManager assetManager, String dirPath, String configFilename);
    - @brief 全局初始化函数，初始化模型，进程初始化一次即可，多线程不安全
    - @param `assetManager` Android 管理 `Assets` 类，可通过 `this.getAssets()` 获得
    - @param `dirPath` 模型所在 `Assets` 存储下的相对路径
    - @param `configFilename` 模型所在 `Assets` 存储下的相对路径下 config 的文件名，如 `config.ini`
    - @return `< 0` 失败

- static void globalRelease();
    - @brief 全局析构函数，进程结束析构一次即可，多线程不安全

- void destroy();
    - @brief 每一个 new 出的实例，都需要明确的 destroy()。防止内存泄漏。

### 功能接口

- static int getFaceDistance(float[] xy5Points, byte[] depth16Data, int width, int height);
    - @brief 获得人脸深度图上的人脸距离
    - @param `xy5Points` 人脸关键五点[左眼中心，右眼中心，鼻尖，左嘴角，右嘴角]
    - @param `depth16Data` 深度图的图像数据，16 bits 的深度图
    - @param `width` 深度图的宽
    - @param `height` 深度图的高
    - @return 人脸距离

- float detect(float[] xy5Points, byte[] depth16Data, int width, int height);
    - @brief 人脸 3D 活体判断打分，多线程安全
    - @param `xy5Points` 人脸关键五点[左眼中心，右眼中心，鼻尖，左嘴角，右嘴角]
    - @param `depth16Data` 深度图的图像数据，16 bits 的深度图
    - @param `width` 深度图的宽
    - @param `height` 深度图的高
    - @return 人脸深度图活体打分结果
