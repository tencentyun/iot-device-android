<!-- 本文档由脚本自动生成，请勿手动修改 -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <style>.hljs{display:block;overflow-x:auto;padding:0.5em;background:#F0F0F0}.hljs,.hljs-subst{color:#444}.hljs-comment{color:#888888}.hljs-keyword,.hljs-attribute,.hljs-selector-tag,.hljs-meta-keyword,.hljs-doctag,.hljs-name{font-weight:bold}.hljs-type,.hljs-string,.hljs-number,.hljs-selector-id,.hljs-selector-class,.hljs-quote,.hljs-template-tag,.hljs-versiondeletion{color:#880000}.hljs-title,.hljs-section{color:#880000;font-weight:bold}.hljs-regexp,.hljs-symbol,.hljs-variable,.hljs-template-variable,.hljs-link,.hljs-selector-attr,.hljs-selector-pseudo{color:#BC6060}.hljs-literal{color:#78A960}.hljs-built_in,.hljs-bullet,.hljs-code,.hljs-addition{color:#397300}.hljs-meta{color:#1f7199}.hljs-meta-string{color:#4d99bf}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:bold}</style>
    <style>/*!
 * Primer-product
 * http://primer.github.io
 *
 * Released under MIT license. Copyright (c) 2018 GitHub Inc.
 */
.markdown-body {
    font-family: -apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol !important;
    font-size: 16px;
    line-height: 1.5;
    word-wrap: break-word;
    width: 1000px;
    margin: auto;
}

.markdown-body:after,.markdown-body:before {
    content: "";
    display: table
}

.markdown-body:after {
    clear: both
}

.markdown-body>:first-child {
    margin-top: 0!important
}

.markdown-body>:last-child {
    margin-bottom: 0!important
}

.markdown-body a:not([href]) {
    color: inherit;
    text-decoration: none
}

.markdown-body .absent {
    color: #cb2431
}

.markdown-body .anchor {
    float: left;
    line-height: 1;
    margin-left: -20px;
    padding-right: 4px
}

.markdown-body .anchor:focus {
    outline: none
}

.markdown-body blockquote,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul {
    margin-bottom: 16px;
    margin-top: 0
}

.markdown-body hr {
    background-color: #e1e4e8;
    border: 0;
    height: .25em;
    margin: 24px 0;
    padding: 0
}

.markdown-body blockquote {
    border-left: .25em solid #dfe2e5;
    color: #6a737d;
    padding: 0 1em
}

.markdown-body blockquote>:first-child {
    margin-top: 0
}

.markdown-body blockquote>:last-child {
    margin-bottom: 0
}

.markdown-body kbd {
    background-color: #fafbfc;
    border: 1px solid #c6cbd1;
    border-bottom-color: #959da5;
    border-radius: 3px;
    box-shadow: inset 0 -1px 0 #959da5;
    color: #444d56;
    display: inline-block;
    font-size: 11px;
    line-height: 10px;
    padding: 3px 5px;
    vertical-align: middle
}

.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6 {
    font-weight: 600;
    line-height: 1.25;
    margin-bottom: 16px;
    margin-top: 24px
}

.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link {
    color: #1b1f23;
    vertical-align: middle;
    visibility: hidden
}

.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor {
    text-decoration: none
}

.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link {
    visibility: visible
}

.markdown-body h1 code,.markdown-body h1 tt,.markdown-body h2 code,.markdown-body h2 tt,.markdown-body h3 code,.markdown-body h3 tt,.markdown-body h4 code,.markdown-body h4 tt,.markdown-body h5 code,.markdown-body h5 tt,.markdown-body h6 code,.markdown-body h6 tt {
    font-size: inherit
}

.markdown-body h1 {
    font-size: 2em
}

.markdown-body h1,.markdown-body h2 {
    border-bottom: 1px solid #eaecef;
    padding-bottom: .3em
}

.markdown-body h2 {
    font-size: 1.5em
}

.markdown-body h3 {
    font-size: 1.25em
}

.markdown-body h4 {
    font-size: 1em
}

.markdown-body h5 {
    font-size: .875em
}

.markdown-body h6 {
    color: #6a737d;
    font-size: .85em
}

.markdown-body ol,.markdown-body ul {
    padding-left: 2em
}

.markdown-body ol.no-list,.markdown-body ul.no-list {
    list-style-type: none;
    padding: 0
}

.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul {
    margin-bottom: 0;
    margin-top: 0
}

.markdown-body li {
    word-wrap: break-all
}

.markdown-body li>p {
    margin-top: 16px
}

.markdown-body li+li {
    margin-top: .25em
}

.markdown-body dl {
    padding: 0
}

.markdown-body dl dt {
    font-size: 1em;
    font-style: italic;
    font-weight: 600;
    margin-top: 16px;
    padding: 0
}

.markdown-body dl dd {
    margin-bottom: 16px;
    padding: 0 16px
}

.markdown-body table {
    display: block;
    overflow: auto;
    width: 100%
}

.markdown-body table th {
    font-weight: 600
}

.markdown-body table td,.markdown-body table th {
    border: 1px solid #dfe2e5;
    padding: 6px 13px
}

.markdown-body table tr {
    background-color: #fff;
    border-top: 1px solid #c6cbd1
}

.markdown-body table tr:nth-child(2n) {
    background-color: #f6f8fa
}

.markdown-body table img {
    background-color: initial
}

.markdown-body img {
    background-color: #fff;
    box-sizing: initial;
    max-width: 100%
}

.markdown-body img[align=right] {
    padding-left: 20px
}

.markdown-body img[align=left] {
    padding-right: 20px
}

.markdown-body .emoji {
    background-color: initial;
    max-width: none;
    vertical-align: text-top
}

.markdown-body span.frame {
    display: block;
    overflow: hidden
}

.markdown-body span.frame>span {
    border: 1px solid #dfe2e5;
    display: block;
    float: left;
    margin: 13px 0 0;
    overflow: hidden;
    padding: 7px;
    width: auto
}

.markdown-body span.frame span img {
    display: block;
    float: left
}

.markdown-body span.frame span span {
    clear: both;
    color: #24292e;
    display: block;
    padding: 5px 0 0
}

.markdown-body span.align-center {
    clear: both;
    display: block;
    overflow: hidden
}

.markdown-body span.align-center>span {
    display: block;
    margin: 13px auto 0;
    overflow: hidden;
    text-align: center
}

.markdown-body span.align-center span img {
    margin: 0 auto;
    text-align: center
}

.markdown-body span.align-right {
    clear: both;
    display: block;
    overflow: hidden
}

.markdown-body span.align-right>span {
    display: block;
    margin: 13px 0 0;
    overflow: hidden;
    text-align: right
}

.markdown-body span.align-right span img {
    margin: 0;
    text-align: right
}

.markdown-body span.float-left {
    display: block;
    float: left;
    margin-right: 13px;
    overflow: hidden
}

.markdown-body span.float-left span {
    margin: 13px 0 0
}

.markdown-body span.float-right {
    display: block;
    float: right;
    margin-left: 13px;
    overflow: hidden
}

.markdown-body span.float-right>span {
    display: block;
    margin: 13px auto 0;
    overflow: hidden;
    text-align: right
}

.markdown-body code,.markdown-body tt {
    font-family: consolas;
    background-color: rgba(27,31,35,.05);
    border-radius: 3px;
    font-size: 85%;
    margin: 0;
    padding: .2em .4em
}

.markdown-body code br,.markdown-body tt br {
    display: none
}

.markdown-body del code {
    text-decoration: inherit
}

.markdown-body pre {
    word-wrap: normal
}

.markdown-body pre>code {
    font-family: consolas;
    background: transparent;
    border: 0;
    font-size: 100%;
    margin: 0;
    padding: 0;
    white-space: pre;
    word-break: normal
}

.markdown-body .highlight {
    margin-bottom: 16px
}

.markdown-body .highlight pre {
    margin-bottom: 0;
    word-break: normal
}

.markdown-body .highlight pre,.markdown-body pre {
    background-color: #f6f8fa;
    border-radius: 3px;
    font-size: 85%;
    line-height: 1.45;
    overflow: auto;
    padding: 16px
}

.markdown-body pre code,.markdown-body pre tt {
    background-color: initial;
    border: 0;
    display: inline;
    line-height: inherit;
    margin: 0;
    max-width: auto;
    overflow: visible;
    padding: 0;
    word-wrap: normal
}

.markdown-body .csv-data td,.markdown-body .csv-data th {
    font-size: 12px;
    line-height: 1;
    overflow: hidden;
    padding: 5px;
    text-align: left;
    white-space: nowrap
}

.markdown-body .csv-data .blob-num {
    background: #fff;
    border: 0;
    padding: 10px 8px 9px;
    text-align: right
}

.markdown-body .csv-data tr {
    border-top: 0
}

.markdown-body .csv-data th {
    background: #f6f8fa;
    border-top: 0;
    font-weight: 600
}

</style>
    <title>优图人脸精确配准文档</title>
</head>
<body class="markdown-body"><h1 id="优图人脸精确配准文档">优图人脸精确配准文档</h1><blockquote>
<p>优图人脸精确配准</p>
</blockquote>
<p>version: v1.0.0</p>
<h2 id="CHANGELIST">CHANGELIST</h2><h2 id="Java">Java</h2><p>package: com.tencent.youtu.YTFaceAlignment</p>
<h3 id="通用接口">通用接口</h3><ul>
<li><p>static String getVersion();</p>
<ul>
<li>@brief 获得 SDK + MODEL 的版本号，如<code>v3.0.0-v7114</code><ul>
<li>MODEL 的版本号由 <code>config.ini</code> 中读取获得</li>
<li>SDK 的版本号一般为 <code>v3.0.0</code>/<code>v3.0.0-beta.0</code>/<code>v3.1.1-rc.0</code></li>
</ul>
</li>
<li>@return 版本号</li>
</ul>
</li>
<li><p>static int globalInit(String dirPath, String filename);</p>
<ul>
<li>@brief 全局初始化函数，初始化模型，进程初始化一次即可，多线程不安全</li>
<li>@param <code>dirPath</code> 模型所在外部存储空间的绝对路径</li>
<li>@param <code>filename</code> 模型所在外部存储控件路径下 config 的文件名，如 <code>config.ini</code></li>
<li>@return <code>&lt; 0</code> 失败</li>
</ul>
</li>
<li><p>static int globalInit(AssetManager assetManager, String dirPath, String filename);</p>
<ul>
<li>@brief 全局初始化函数，初始化模型，进程初始化一次即可，多线程不安全</li>
<li>@param <code>assetManager</code> Android 管理 <code>Assets</code> 类，可通过 <code>this.getAssets()</code> 获得</li>
<li>@param <code>dirPath</code> 模型所在 <code>Assets</code> 存储下的相对路径</li>
<li>@param <code>filename</code> 模型所在 <code>Assets</code> 存储下的相对路径下 config 的文件名，如 <code>config.ini</code></li>
<li>@return <code>&lt; 0</code> 失败</li>
</ul>
</li>
<li><p>static void globalRelease();</p>
<ul>
<li>@brief 全局析构函数，进程结束析构一次即可，多线程不安全</li>
</ul>
</li>
<li><p>void destroy();</p>
<ul>
<li>@brief 每一个 new 出的实例，都需要明确的 destroy()。防止内存泄漏。</li>
</ul>
</li>
</ul>
<h3 id="功能接口">功能接口</h3><ul>
<li><p>class FaceShapeInfo</p>
<ul>
<li>float faceProfile[]: 轮廓坐标</li>
<li>float leftEyebrow[]: 左眉坐标</li>
<li>float rightEyebrow[]: 右眉坐标</li>
<li>float leftEye[]: 左眼坐标</li>
<li>float rightEye[]: 右眼坐标</li>
<li>float nose[]: 鼻子坐标</li>
<li>float mouth[]: 嘴巴坐标</li>
<li>float pupil[]: 瞳孔坐标</li>
<li>float faceProfileVis[]: 轮廓可见度</li>
<li>float leftEyebrowVis[]: 左眉可见度</li>
<li>float rightEyebrowVis[]: 右眉可见度</li>
<li>float leftEyeVis[]: 左眼可见度</li>
<li>float rightEyeVis[]: 右眼可见度</li>
<li>float noseVis[]: 鼻子可见度</li>
<li>float mouthVis[]: 嘴巴可见度</li>
<li>float pupilVis[]: 瞳孔可见度</li>
<li>float confidence: 配准置信度</li>
<li>Rect faceRect: 人脸框</li>
</ul>
</li>
<li><p>class FaceShapeStatus</p>
<ul>
<li>int pupilDist: 瞳孔距离（像素）</li>
<li>boolean isLeftEyeOpen: 左眼是否睁开</li>
<li>boolean isRightEyeOpen: 右眼是否睁开</li>
<li>boolean isMouthOpen: 嘴巴是否睁开</li>
<li>float leftEyebrowBlock: 左眉遮挡分数,分数范围[0,100],分数越低,遮挡程度越大,[0,80]表示发生遮挡</li>
<li>float rightEyebrowBlock: 右眉遮挡分数,分数范围[0,100],分数越低,遮挡程度越大,[0,80]表示发生遮挡</li>
<li>float leftEyeBlock: 左眼遮挡分数,分数范围[0,100],分数越低,遮挡程度越大,[0,80]表示发生遮挡</li>
<li>float rightEyeBlock: 右眼遮挡分数,分数范围[0,100],分数越低,遮挡程度越大,[0,80]表示发生遮挡</li>
<li>float noseBlock: 鼻子遮挡分数,分数范围[0,100],分数越低,遮挡程度越大,[0,60]表示发生遮挡</li>
<li>float mouthBlock: 嘴巴遮挡分数,分数范围[0,100],分数越低,遮挡程度越大,[0,50]表示发生遮挡</li>
<li>float leftProfileBlock: 左脸遮挡分数,分数范围[0,100],分数越低,遮挡程度越大,[0,70]表示发生遮挡</li>
<li>float chinBlock: 下巴遮挡分数,分数范围[0,100],分数越低,遮挡程度越大,[0,70]表示发生遮挡</li>
<li>float rightProfileBlock: 右脸遮挡分数,分数范围[0,100],分数越低,遮挡程度越大,[0,70]表示发生遮挡</li>
</ul>
</li>
<li><p>public FaceShapeInfo align(byte[] rgbData, int width, int height, Rect faceRect, boolean isFirstFrame)</p>
<ul>
<li>@brief 获取人脸配准信息，根据检测出人脸框进行配准</li>
<li>@param rgbData rgb图像</li>
<li>@param width 图像宽</li>
<li>@param height 图像高</li>
<li>@param faceRect 人脸框</li>
<li>@param isFirstFrame true:针对单帧图片 false:针对连续视频帧</li>
<li>@return 人脸配准信息</li>
</ul>
</li>
<li><p>public FaceShapeInfo align(byte[] rgbData, int width, int height, FaceShapeInfo faceShapes)</p>
<ul>
<li>@brief 获取人脸配准信息，根据上一帧配准信息进行配准</li>
<li>@param rgbData rgb图像</li>
<li>@param width 图像宽</li>
<li>@param height 图像高</li>
<li>@param faceShapes 上一帧配准信息</li>
<li>@return 人脸配准信息</li>
</ul>
</li>
<li><p>public FaceShapeStatus getStatus(FaceShapeInfo faceShapeInfo)</p>
<ul>
<li>@brief 获取人脸状态（如遮挡，瞳距，睁闭眼等），根据配准得到的人脸信息进行计算</li>
<li>@param faceShapeInfo 配准得到的人脸信息</li>
<li>@return 人脸状态（如遮挡，瞳距，睁闭眼等）</li>
</ul>
</li>
</ul>
</body>
</html>